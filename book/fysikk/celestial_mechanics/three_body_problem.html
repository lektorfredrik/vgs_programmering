

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Trelegemeproblemet &#8212; Programmering i Videregående Skole</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../../../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({"startOnLoad": true})</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'book/fysikk/celestial_mechanics/three_body_problem';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Et pistolskudd opp i lufta" href="../bullet_trajectory/bullet_trajectory.html" />
    <link rel="prev" title="Simulering av Solsystemet med Interaksjoner" href="solsystem_med_interaksjon.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
  
    <p class="title logo__title">Programmering i Videregående Skole</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Programmering i Videregående Skole
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Grunnleggende Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../python/variabler_og_regning/variabler.html">Variabler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/variabler_og_regning/regning.html">Å regne med Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/if_else/if_else.html"><code class="docutils literal notranslate"><span class="pre">if</span></code>-<code class="docutils literal notranslate"><span class="pre">else</span></code> tester</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/iterasjon/while_loops.html"><code class="docutils literal notranslate"><span class="pre">while</span></code>-løkker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/iterasjon/for_loops.html"><code class="docutils literal notranslate"><span class="pre">for</span></code>-løkker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/containers/lists.html">Lister</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python for Viderekomne</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../python/funksjoner/intro.html">Funksjoner i Python</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../python/funksjoner/funksjoner.html">Pythonfunksjoner som matematisk funksjoner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/funksjoner/element%C3%A6re_funksjoner.html">Elementære (Matematiske) Funksjoner i Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/funksjoner/funksjoner_med_flere_variabler.html">Funksjoner med flere variabler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/funksjoner/funksjoner_med_delt_forskrift.html">Funksjoner med delt forskrift</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../python/iterasjon/list_loops.html">Løkker med lister</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/special_modules/matplotlib.html">Tegne grafer med <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Avansert Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../python/funksjoner/funksjoner_avansert.html">Pythonfunksjoner slik proffene gjør det</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Matematikk med Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../python/symbolsk_python/intro.html">Symbolsk Programmering med Python (CAS)</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../python/symbolsk_python/likninger.html">Løse Likninger med <code class="docutils literal notranslate"><span class="pre">sympy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/symbolsk_python/polynomdivisjon.html">Polynomdivisjon med <code class="docutils literal notranslate"><span class="pre">sympy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/symbolsk_python/likningsystemer.html">Løse Likningssystemer med <code class="docutils literal notranslate"><span class="pre">sympy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/symbolsk_python/ulikheter.html">Løse Ulikheter med <code class="docutils literal notranslate"><span class="pre">sympy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/symbolsk_python/derivasjon.html">Symbolsk Derivasjon med <code class="docutils literal notranslate"><span class="pre">sympy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/symbolsk_python/integrasjon.html">Symbolsk Integrasjon med <code class="docutils literal notranslate"><span class="pre">sympy</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../matematikk/nullpunkter/intro.html">Finne Nullpunkter Numerisk</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/nullpunkter/halveringsmetoden.html">Halveringsmetoden</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/nullpunkter/newtons_metode.html">Newtons metode</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../matematikk/derivasjon/intro.html">Numerisk Derivasjon</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/derivasjon/first_derivative.html">Numerisk derivasjon av første orden (førstederiverte)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/derivasjon/andrederiverte.html">Numerisk derivasjon av andre orden (andrederiverte)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../matematikk/integrasjon/intro.html">Numerisk Integrasjon</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/integrasjon/trapesmetoden.html">Trapesmetoden</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/integrasjon/midtpunktsmetoden.html">Midtpunktsmetoden</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/integrasjon/mc_integrasjon.html">Monte Carlo Integrasjon (Matematikk S2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/integrasjon/lengde_av_graf.html">Buelengde</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../matematikk/f%C3%B8lger_og_rekker/intro.html">Følger og Rekker</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/f%C3%B8lger_og_rekker/sequences.html">Intro til følger og rekker med Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/f%C3%B8lger_og_rekker/praktiske_anvendelser_av_rekker.html">Praktiske Anvendelser av Rekker med Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/f%C3%B8lger_og_rekker/rekursive_funksjoner.html">Følger og rekker med rekursive funksjoner</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../matematikk/sannsynlighet/intro.html">Sannsynlighet</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/sannsynlighet/simulere_sannsynligheter.html">Simulere sannsynligheter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matematikk/sannsynlighet/exp_var_std_simulering.html">Forventning, Varians Og Standardavvik med Simuleringer</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../data_analyse/intro.html">Dataanalyse av reelle datasett</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../data_analyse/IO/read_files.html">Lese inn data fra filer 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../data_analyse/climate_change/climate_change.html">Klimaendringer</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Fysikk med Python</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../pi_factory/pi_fabrikken.html">Elastiske kollisjoner: en uventet <span class="math notranslate nohighlight">\(\pi\)</span>-fabrikk</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="planetbaner.html">Simulere planetbaner</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="solsystem_med_interaksjon.html">Simulering av Solsystemet med Interaksjoner</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Trelegemeproblemet</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bullet_trajectory/bullet_trajectory.html">Et pistolskudd opp i lufta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fireworks/fireworks.html">Simulere fyrverkeri</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Biologi med Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../biologi/antibiotika_resistente_bakterier.html">Prosjekt: Simulering av Antibiotikaresistente Bakterier</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/reneaas/vgs_programmering/main/?urlpath=lab/tree/book/book/fysikk/celestial_mechanics/three_body_problem.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/reneaas/vgs_programmering" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/reneaas/vgs_programmering/issues/new?title=Issue%20on%20page%20%2Fbook/fysikk/celestial_mechanics/three_body_problem.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/book/fysikk/celestial_mechanics/three_body_problem.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Trelegemeproblemet</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bakgrunnsteori">Bakgrunnsteori</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gravitasjonskraften-fra-ett-legeme-pa-et-annet">Gravitasjonskraften fra ett legeme på et annet</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gravitasjonskraften-pa-ett-legeme-fra-n-1-andre-legemer">Gravitasjonskraften på ett legeme fra <span class="math notranslate nohighlight">\(n - 1\)</span> andre legemer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#newtons-2-lov">Newtons 2.lov</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velocity-verlet-algoritmen">Velocity Verlet-algoritmen</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#astronomiske-enheter">Astronomiske enheter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#initialbetingelser">Initialbetingelser</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgaver">Oppgaver</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-1-lag-arrays-med-initialbetingelser">Oppgave 1: lag arrays med initialbetingelser</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-2-lag-en-funksjon-som-regner-ut-akselerasjonen">Oppgave 2: Lag en funksjon som regner ut akselerasjonen</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-3-lag-en-funksjon-som-regner-ut-neste-posisjon-og-hastighet">Oppgave 3: Lag en funksjon som regner ut neste posisjon og hastighet</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-4-sett-det-hele-sammen-til-a-lage-en-simulering">Oppgave 4: Sett det hele sammen til å lage en simulering</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="trelegemeproblemet">
<h1>Trelegemeproblemet<a class="headerlink" href="#trelegemeproblemet" title="Permalink to this heading">#</a></h1>
<p>Trelegemeproblemet handler om å simulere planetbanene til tre legemer som interagerer med en sentralkraft. I dette tilfellet skal vi se på tilfellet der sentralkraften er gravitasjonskraften. Du skal skrive en kode som regner ut banene til</p>
<ol class="arabic simple">
<li><p>En planet med en masse tilsvarende jorda.</p></li>
<li><p>En stjerne med masse tilsvarende sola.</p></li>
<li><p>En stjerne med masse som er fire ganger så stor som sola.</p></li>
</ol>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">2d-simulering</label><div class="tab-content docutils">
<figure class="align-default" id="three-body-system-2d">
<img alt="../../../_images/three_body_system_2d.gif" src="../../../_images/three_body_system_2d.gif" />
<figcaption>
<p><span class="caption-number">Fig. 31 </span><span class="caption-text">Animasjon av trelegemeproblemet i 2D over 10 jordår.</span><a class="headerlink" href="#three-body-system-2d" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">3d-simulering</label><div class="tab-content docutils">
<figure class="align-default" id="three-body-system-3d">
<img alt="../../../_images/three_body_system_3d.gif" src="../../../_images/three_body_system_3d.gif" />
<figcaption>
<p><span class="caption-number">Fig. 32 </span><span class="caption-text">Animasjon av trelegemeproblemet i 3D over 10 jordår.</span><a class="headerlink" href="#three-body-system-3d" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</div>
<section id="bakgrunnsteori">
<h2>Bakgrunnsteori<a class="headerlink" href="#bakgrunnsteori" title="Permalink to this heading">#</a></h2>
<section id="gravitasjonskraften-fra-ett-legeme-pa-et-annet">
<h3>Gravitasjonskraften fra ett legeme på et annet<a class="headerlink" href="#gravitasjonskraften-fra-ett-legeme-pa-et-annet" title="Permalink to this heading">#</a></h3>
<p>I fysikken i videregående skole lærer man at gravitasjonsloven kan skrives som</p>
<div class="math notranslate nohighlight">
\[
F = -\gamma \frac{m_1 m_2}{r^2},
\]</div>
<p>der <span class="math notranslate nohighlight">\(r\)</span> er avstanden mellom de to legemene, <span class="math notranslate nohighlight">\(m_1\)</span> og <span class="math notranslate nohighlight">\(m_2\)</span> er massene til objektene og <span class="math notranslate nohighlight">\(\gamma\)</span> er gravitasjonskonstanten.</p>
<p>Svakheten med denne loven er at kraften er en vektorstørrelse og har retning, mens vi med loven over kun regner ut størrelsen. I tillegg antar den at kilden til gravitasjonskraften er i origo i koordinatsystemet vi bruker. I stedet kan vi skrive loven slik:</p>
<div class="math notranslate nohighlight">
\[
\vec{F}_1 = -\gamma m_1 m_2 \frac{\vec{r}_1 - \vec{r}_2}{|\vec{r}_1 - \vec{r}_2|^3},
\]</div>
<p>der kraften virker på masse <span class="math notranslate nohighlight">\(m_1\)</span> i posisjon <span class="math notranslate nohighlight">\(\vec{r}_1\)</span> fra legeme med masse <span class="math notranslate nohighlight">\(m_2\)</span> i posisjon <span class="math notranslate nohighlight">\(\vec{r}_2\)</span>. Med denne versjonen av loven, får vi med retningsvektoren til kraften så vi automatisk får riktig retning som kraften virker i.</p>
</section>
<section id="gravitasjonskraften-pa-ett-legeme-fra-n-1-andre-legemer">
<h3>Gravitasjonskraften på ett legeme fra <span class="math notranslate nohighlight">\(n - 1\)</span> andre legemer<a class="headerlink" href="#gravitasjonskraften-pa-ett-legeme-fra-n-1-andre-legemer" title="Permalink to this heading">#</a></h3>
<p>Når vi skal simulere et system bestående av flere legemer, vil det virke en gravitasjonskraft fra hvert legeme på hvert annet i systemet. Hvis det er tre legemer, vil ett legeme påvirkes av gravitasjonskraften fra de to andre, og vice versa. Vi trenger en utvidet versjon av gravitasjonsloven når det er flere legemer til stedet. Kraften på legeme <span class="math notranslate nohighlight">\(i\)</span> er da gitt ved</p>
<div class="math notranslate nohighlight">
\[
\vec{F}_i = -\sum_{j\neq i} \gamma m_i m_j \frac{\vec{r}_i - \vec{r}_j}{|\vec{r}_i - \vec{r}_j|^3},
\]</div>
<p>der <span class="math notranslate nohighlight">\(\vec{r}_i\)</span> er posisjonen til legemet kraften virker på, <span class="math notranslate nohighlight">\(m_i\)</span> er massen til legeme kraften virker på, <span class="math notranslate nohighlight">\(m_j\)</span> er kraften til legeme <span class="math notranslate nohighlight">\(j\)</span> og <span class="math notranslate nohighlight">\(\vec{r}_j\)</span> er posisjonen til legeme <span class="math notranslate nohighlight">\(j\)</span>. Vi summerer over alle legemer bortsett fra legeme <span class="math notranslate nohighlight">\(i\)</span> selv, som er grunnen til at det står <span class="math notranslate nohighlight">\(\sum_{j\neq i}\)</span>. Vi kommer tilbake til hvordan vi håndterer det med kode senere.</p>
</section>
<section id="newtons-2-lov">
<h3>Newtons 2.lov<a class="headerlink" href="#newtons-2-lov" title="Permalink to this heading">#</a></h3>
<p>Når vi ønsker å finne bevegelsen til et legeme over tid, er Newtons 2.lov vår <em>go-to</em> lov. Kjenner vi alle kreftene på legeme, kan vi finne bevegelsen til legemet over tid. Newtons 2.lov kan oppsummeres som</p>
<div class="math notranslate nohighlight">
\[
\sum_{n} \vec{F}_n = m_i\vec{a}_i,
\]</div>
<p>I dette tilfellet, er summen av kreftene den totale gravitasjonskraften som virker på legemet. For legemet <span class="math notranslate nohighlight">\(i\)</span> kan vi skrive dette som</p>
<div class="math notranslate nohighlight">
\[
m_i\vec{a}_i = -\gamma \sum_{j \neq i} m_i m_j \frac{\vec{r}_i - \vec{r}_j}{|\vec{r}_i - \vec{r}_j|^3}, 
\]</div>
<p>som gir</p>
<div class="math notranslate nohighlight">
\[
\vec{a}_i = -\gamma \sum_{j \neq i} m_j \frac{\vec{r}_i - \vec{r}_j}{|\vec{r}_i - \vec{r}_j|^3}.
\]</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Eksempel på tre legemer<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Tenk deg at vi har 3 legemer, og vi ønsker å regne ut akselerasjonen til legeme 2. Da har vi</p>
<ul class="simple">
<li><p class="sd-card-text">Tre posisjoner <span class="math notranslate nohighlight">\(\vec{r}_1\)</span>, <span class="math notranslate nohighlight">\(\vec{r}_2\)</span> og <span class="math notranslate nohighlight">\(\vec{r}_3\)</span>.</p></li>
<li><p class="sd-card-text">Tre masser <span class="math notranslate nohighlight">\(m_1\)</span>, <span class="math notranslate nohighlight">\(m_2\)</span> og <span class="math notranslate nohighlight">\(m_3\)</span>.</p></li>
</ul>
<p class="sd-card-text">Men vi må ekskludere legeme 2 fra summen, siden vi ikke ønsker å regne ut gravitasjonskraften fra legeme 2 på seg selv (noe som ikke gir mening når vi betrakter det som et punktlegeme).</p>
<p class="sd-card-text">Plugger vi det inn i akselerasjonsformelen, blir det da slik:</p>
<div class="math notranslate nohighlight">
\[
\vec{a}_2 = -\gamma \left( m_1 \frac{\vec{r}_2 - \vec{r}_1}{|\vec{r}_2 - \vec{r}_1|^3} + m_3 \frac{\vec{r}_2 - \vec{r}_3}{|\vec{r}_2 - \vec{r}_3|^3} \right).
\]</div>
<p class="sd-card-text"><em>Merknad: Dette er bare ment for å opplyse deg om hva formelen med <span class="math notranslate nohighlight">\(\sum_{j \neq i}\)</span> betyr for noe. Når du skal kode dette, handler det hele bare å sjekke om <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">!=</span> <span class="pre">j</span></code> i en <code class="docutils literal notranslate"><span class="pre">if</span></code>-test, for å så regne ut summen som normalt.</em></p>
</div>
</details></section>
<section id="velocity-verlet-algoritmen">
<h3>Velocity Verlet-algoritmen<a class="headerlink" href="#velocity-verlet-algoritmen" title="Permalink to this heading">#</a></h3>
<p>Solsystemet er et system der energien er bevart. Du har kanskje sett Euler-Comer før, men her skal vi bruke en annen numerisk metode som også bevarer energi, en såkalt <em>symplektisk</em> integrator. En slik metode vil holde energien konstant i gjennomsnitt over tid. I praksis vil vi observere at verdien til energien svinger frem og tilbake om startverdien. Euler-Cromer svinger i mye større grad enn den metoden vi skal bruke.</p>
<p>Vi skal benytte oss av en annen symplektisk metode som kallet for <em>velocity Verlet</em>-algoritmen. Anta at</p>
<div class="math notranslate nohighlight">
\[
\vec{a}_i(t) = \vec{f}(\vec{r}_1(t), \vec{r}_2(t), \ldots, \vec{r}_{n}(t)),
\]</div>
<p>gir oss akselerasjon ved tidspunkt <span class="math notranslate nohighlight">\(t\)</span>, og <span class="math notranslate nohighlight">\(\vec{r}_1(t), \vec{r}_2(t), \ldots, \vec{r}_n(t)\)</span> er posisjonene til planetene ved tidspunkt <span class="math notranslate nohighlight">\(t\)</span>. Da kan vi regne ut neste posisjon og hastighet til planet <span class="math notranslate nohighlight">\(i\)</span> (med en steglengde <span class="math notranslate nohighlight">\(\Delta t\)</span> tid):</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\vec{r}_i(t + \Delta t) &amp; \approx \vec{r}_i(t) + \vec{v}_i(t) \Delta t + \frac{1}{2}\vec{a}_i(t) \Delta t^2, \\
\vec{v}_i(t + \Delta t) &amp; \approx \vec{v}_i(t) + \frac{1}{2}\left[\vec{a}_i(t) + \vec{a}_i(t + \Delta t)\right]\Delta t.
\end{align*}
\end{split}\]</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Typisk fallgruve</p>
<p>En typisk fallgruve her er at man bruke algoritmen direkte på én planet av gangen, men siden akselerasjonen til hver planet er avhengig av posisjonen til alle de andre, må bare gjøre <em>steg 1</em> av algoritmen på <strong>alle</strong> planetene før man gjøre steg to på <strong>alle</strong> planetene. Med andre ord</p>
<ol class="arabic simple">
<li><p>Oppdater posisjonen til <strong>alle</strong> planetene først (inkludert solen).</p></li>
<li><p>Deretter oppdater hastigheten til <strong>alle</strong> planetene (inkludert solen).</p></li>
</ol>
</div>
</section>
<section id="astronomiske-enheter">
<h3>Astronomiske enheter<a class="headerlink" href="#astronomiske-enheter" title="Permalink to this heading">#</a></h3>
<p>Når man regner på planetbaner, er det nyttig å jobbe med andre enheter fordi størrelsene vi jobber med er såpass store. Avstandene spenner flere millioner kilometer og tiden spenner flere jordår. Derfor velger vi å:</p>
<ul class="simple">
<li><p>Måle avstander i astronomiske enheter, AU. (1 AU er gjennomsnittsavstanden mellom jorden og solen. Ca. 150 millioner km.)</p></li>
<li><p>Mål hastigheter i AU/år (AU/jordår).</p></li>
<li><p>Måle tid i år (jordår).</p></li>
<li><p>Masse måles i antall <em>solmasser</em> <span class="math notranslate nohighlight">\(M_\odot = 2\cdot 10^{30} \ \text{kg}\)</span>. (1 solmasse er massen til sola vår). <em>Hint: for å omgjøre en masse til solmasser, deler man massen med solmassen. Da får du hvor mange solmasser den massen utgjør</em>.</p></li>
<li><p>Gravitasjonskonstanten <span class="math notranslate nohighlight">\(\gamma\)</span> er tilnærmet gitt ved <span class="math notranslate nohighlight">\(\gamma = 4\pi^2 \ \text{AU}^3/(\text{år}^2 M_\odot)\)</span> i astronomiske enheter. Det er en konsekvens som følger fra Keplers 3.lov. Hvis du tenker over enhetene, så gir de mening fordi vi har satt <span class="math notranslate nohighlight">\(\text{m} \to \text{AU}\)</span>, og <span class="math notranslate nohighlight">\(\text{s} \to \text{år}\)</span>, og <span class="math notranslate nohighlight">\(\text{kg} \to M_\odot\)</span>.</p></li>
</ul>
</section>
<section id="initialbetingelser">
<h3>Initialbetingelser<a class="headerlink" href="#initialbetingelser" title="Permalink to this heading">#</a></h3>
<p>Her skal vi liste opp initialbetingelsene til legemene inkludert massene deres. Disse trenger du for å kjøre simuleringen.</p>
<p><strong>Tabell 1: Initialbetingelser for solsystemet.</strong></p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Legeme</p></th>
<th class="head"><p>Masse <span class="math notranslate nohighlight">\(m\)</span> [kg]</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(x\)</span> [AU]</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(y\)</span> [AU]</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(z\)</span> [AU]</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(v_x\)</span> [km/s]</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(v_y\)</span> [km/s]</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(v_z\)</span> [km/s]</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Planet</p></td>
<td><p><span class="math notranslate nohighlight">\(6 \cdot 10^{24}\)</span></p></td>
<td><p>-1.5</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Lett stjerne</p></td>
<td><p><span class="math notranslate nohighlight">\(2 \cdot 10^{30}\)</span></p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>30</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Tung stjerne</p></td>
<td><p><span class="math notranslate nohighlight">\(8 \cdot 10^{30}\)</span></p></td>
<td><p>3</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>-7.5</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p><em>Merk at du må konvertere hastighetene fra km/s til AU/år!</em></p>
</section>
</section>
<section id="oppgaver">
<h2>Oppgaver<a class="headerlink" href="#oppgaver" title="Permalink to this heading">#</a></h2>
<section id="oppgave-1-lag-arrays-med-initialbetingelser">
<h3>Oppgave 1: lag arrays med initialbetingelser<a class="headerlink" href="#oppgave-1-lag-arrays-med-initialbetingelser" title="Permalink to this heading">#</a></h3>
<p>I denne oppgaven skal du gjøre forarbeidet for simuleringen. Du skal lage en funksjon som</p>
<ul class="simple">
<li><p>Lage et numpy array <code class="docutils literal notranslate"><span class="pre">r</span></code> med initialposisjonene til legemene. Dette skal ha <code class="docutils literal notranslate"><span class="pre">shape=(antall_legemer,</span> <span class="pre">3)</span></code>.</p></li>
<li><p>Lage et numpy array <code class="docutils literal notranslate"><span class="pre">v</span></code> med intialhastighetene til legemene. Dette skal ha <code class="docutils literal notranslate"><span class="pre">shape=(antall_legemer,</span> <span class="pre">3)</span></code>.</p></li>
<li><p>Lage et numpy array <code class="docutils literal notranslate"><span class="pre">m</span></code> med massene til legemene. Dette skal ha <code class="docutils literal notranslate"><span class="pre">shape=(antall_legemer,)</span></code>.</p></li>
<li><p>Gir navn til alle legemene.</p></li>
</ul>
<p>Funksjonen skal reuturnere <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">v</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span></code>, <code class="docutils literal notranslate"><span class="pre">navn</span></code>.</p>
<p><em>Du kan ta utgangspunkt i kodeskallet under. Du må fylle inn der det står <code class="docutils literal notranslate"><span class="pre">NotImplemented</span></code></em>.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Kodehint:<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">For å få laget arrayet med riktig shape her kan du skrive lage et array fra en liste. For eksempel er en liste med <code class="docutils literal notranslate"><span class="pre">shape</span></code> tilsvarende <code class="docutils literal notranslate"><span class="pre">(3,</span> <span class="pre">2)</span></code> (tilsvarer 3 lister med lengde 2 inni en liste) gitt ved en <em>nøstet liste</em> på formen</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Lager liste med form (3, 2)</span>
<span class="n">min_liste</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> 
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> 
    <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="p">]</span>

<span class="c1"># Lager arrayet fra listen</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">min_liste</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">get_init_data</span><span class="p">():</span>
    <span class="c1"># Sett navn på legemene. </span>
    <span class="n">navn</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;planet&quot;</span><span class="p">,</span> <span class="s2">&quot;lett stjerne&quot;</span><span class="p">,</span> <span class="s2">&quot;tung stjerne&quot;</span><span class="p">]</span>

    <span class="c1"># Lage massevektoren</span>
    <span class="n">solmasse</span> <span class="o">=</span> <span class="mf">2e30</span>
    <span class="n">jordmasse</span> <span class="o">=</span> <span class="mf">6e24</span>
    <span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="n">jordmasse</span><span class="p">,</span> <span class="n">solmasse</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">solmasse</span><span class="p">]</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="c1"># omdanner til array</span>
    <span class="n">m</span> <span class="o">/=</span> <span class="n">solmasse</span> <span class="c1"># konverterer alt målt i solmasser.</span>

    <span class="c1"># Lage posisjonsvektoren</span>
    <span class="n">r</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># initialposisjon til planeten i AU</span>
        <span class="p">[</span><span class="bp">NotImplemented</span><span class="p">],</span> <span class="c1"># initialposisjon til lett stjerne i AU</span>
        <span class="p">[</span><span class="bp">NotImplemented</span><span class="p">],</span> <span class="c1"># initialposisjon til tung stjerne i AU</span>
    <span class="p">]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="c1"># omdanner til array</span>

    <span class="c1"># Lage fartsvektoren</span>
    <span class="n">v</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="bp">NotImplemented</span><span class="p">],</span> <span class="c1"># initialfart til planeten i AU/yr</span>
        <span class="p">[</span><span class="bp">NotImplemented</span><span class="p">],</span> <span class="c1"># initialfart til lett stjerne i AU/yr</span>
        <span class="p">[</span><span class="bp">NotImplemented</span><span class="p">],</span> <span class="c1"># initialfart til tung stjerne i AU/yr</span>
    <span class="p">]</span>

    <span class="n">v</span> <span class="o">=</span> <span class="bp">NotImplemented</span> <span class="c1"># omdann til array</span>


    <span class="c1"># Konvertere hastigheter fra km/s til AU/år</span>
    <span class="c1"># Gjør det gjerne i to steg som foreslått under</span>
    <span class="n">v</span> <span class="o">=</span> <span class="bp">NotImplemented</span> <span class="c1"># konverterer fra km/s til AU/s</span>
    <span class="n">v</span> <span class="o">=</span> <span class="bp">NotImplemented</span> <span class="c1"># konverter fra AU/s til AU/år</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">navn</span>


<span class="c1"># Eksempel på funksjonskall for å hente ut dataene</span>
<span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">navn</span> <span class="o">=</span> <span class="n">get_init_data</span><span class="p">()</span> 
</pre></div>
</div>
</div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Løsningsforslag<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Vi må fylle inn det som mangler i kodeskallet. Vi kan gjøre det slik:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="k">def</span> <span class="nf">get_init_data</span><span class="p">():</span>
    <span class="n">navn</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;planet&quot;</span><span class="p">,</span> <span class="s2">&quot;lett stjerne&quot;</span><span class="p">,</span> <span class="s2">&quot;tung stjerne&quot;</span><span class="p">]</span>
    <span class="c1"># Lage massevektoren</span>
    <span class="n">solmasse</span> <span class="o">=</span> <span class="mf">2e30</span>
    <span class="n">jordmasse</span> <span class="o">=</span> <span class="mf">6e24</span>
    <span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="n">jordmasse</span><span class="p">,</span> <span class="n">solmasse</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">solmasse</span><span class="p">]</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="c1"># omdanner til array</span>
    <span class="n">m</span> <span class="o">/=</span> <span class="n">solmasse</span> <span class="c1"># konverterer alt målt i solmasser.</span>

    <span class="c1"># Lage posisjonsvektoren</span>
    <span class="n">r</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># initialposisjon til planeten i AU</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># initialposisjon til lett stjerne i AU</span>
        <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># initialposisjon til tung stjerne i AU</span>
    <span class="p">]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="c1"># omdanner til array</span>

    <span class="c1"># Lage fartsvektoren</span>
    <span class="n">v</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># initialfart til planeten i AU/yr</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># initialfart til lett stjerne i AU/yr</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">7.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1"># initialfart til tung stjerne i AU/yr</span>
    <span class="p">]</span>

    <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># omdann til array</span>


    <span class="c1"># Konvertere hastigheter fra km/s til AU/år</span>
    <span class="c1"># Gjør det gjerne i to steg som foreslått under</span>
    <span class="n">v</span> <span class="o">/=</span> <span class="mf">150e6</span> <span class="c1"># konverterer fra km/s til AU/s</span>
    <span class="n">v</span> <span class="o">*=</span> <span class="mf">365.25</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="c1"># konverter fra AU/s til AU/år</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">navn</span>

</pre></div>
</div>
<p class="sd-card-text">I selve konverteringen har vi brukt at det er <span class="math notranslate nohighlight">\(1 \ \text{AU} = 150\cdot 10^6 \ \text{km}\)</span> og at <span class="math notranslate nohighlight">\(1 år = 365.25 \cdot 24 \cdot 60 \cdot 60 \ \text{s}\)</span>.</p>
</div>
</details></section>
<section id="oppgave-2-lag-en-funksjon-som-regner-ut-akselerasjonen">
<h3>Oppgave 2: Lag en funksjon som regner ut akselerasjonen<a class="headerlink" href="#oppgave-2-lag-en-funksjon-som-regner-ut-akselerasjonen" title="Permalink to this heading">#</a></h3>
<p>For å regne ut planetbanene, må vi først og fremst være i stand til å hente ut hvilken akselerasjon hvert legeme opplever på et gitt tidspunkt. Dette gjør vi ved å lage en funksjon <code class="docutils literal notranslate"><span class="pre">akselerasjon(r,</span> <span class="pre">m,</span> <span class="pre">i)</span></code> som tar inn posisjonsvektoren <code class="docutils literal notranslate"><span class="pre">r</span></code>, massene <code class="docutils literal notranslate"><span class="pre">m</span></code>, og hvilket legeme <code class="docutils literal notranslate"><span class="pre">i</span></code> vi skal regne ut akselerasjonen til, og returnerer akselerasjonsvektoren <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p>
<p><em>Du kan ta utgangspunkt i kodeskallet under. Du må fylle inn der det står <code class="docutils literal notranslate"><span class="pre">NotImplemented</span></code></em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">get_akselerasjon</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">**</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># tre-dimensjonal vektor</span>
    <span class="n">G</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">**</span><span class="mi">2</span> <span class="c1"># gravitasjonskonstanten</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">dr</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">r</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="n">dr_norm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">-=</span> <span class="n">m</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">dr</span> <span class="o">/</span> <span class="n">dr_norm</span><span class="o">**</span><span class="mi">3</span>

    <span class="n">a</span> <span class="o">*=</span> <span class="n">G</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>
</div>
</div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Løsningsforslag<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">get_akselerasjon</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">**</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># tre-dimensjonal vektor</span>
    <span class="n">G</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">**</span><span class="mi">2</span> <span class="c1"># gravitasjonskonstanten</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">dr</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">r</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="n">dr_norm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">-=</span> <span class="n">m</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">dr</span> <span class="o">/</span> <span class="n">dr_norm</span><span class="o">**</span><span class="mi">3</span>

    <span class="n">a</span> <span class="o">*=</span> <span class="n">G</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>
</div>
</div>
</details></section>
<section id="oppgave-3-lag-en-funksjon-som-regner-ut-neste-posisjon-og-hastighet">
<h3>Oppgave 3: Lag en funksjon som regner ut neste posisjon og hastighet<a class="headerlink" href="#oppgave-3-lag-en-funksjon-som-regner-ut-neste-posisjon-og-hastighet" title="Permalink to this heading">#</a></h3>
<p>Her skal du skrive en funksjon <code class="docutils literal notranslate"><span class="pre">verlet_step</span></code> som tar inn:</p>
<ul class="simple">
<li><p>posisjonene til legemene <code class="docutils literal notranslate"><span class="pre">r</span></code>.</p></li>
<li><p>hastighetene til legemene <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p></li>
<li><p>massene til legemene <code class="docutils literal notranslate"><span class="pre">m</span></code>.</p></li>
<li><p>tidssteg <code class="docutils literal notranslate"><span class="pre">dt</span></code></p></li>
<li><p>akselerasjonsfunksjonen <code class="docutils literal notranslate"><span class="pre">get_akselerasjon</span></code></p></li>
</ul>
<p>Funksjonen skal bruke velocity Verlet-algoritmen til å regne ut og returnere</p>
<ul class="simple">
<li><p>Neste posisjon for alle legemene.</p></li>
<li><p>Neste hastighetet for alle legemene.</p></li>
</ul>
<p><em>Du kan ta utgangspunkt i kodeskallet under. Du må fylle inn der det står <code class="docutils literal notranslate"><span class="pre">NotImplemented</span></code></em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">verlet_step</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">get_akselerasjon</span><span class="p">):</span>
    <span class="n">a_gammel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)):</span>
        <span class="n">a_gammel</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_akselerasjon</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>

    <span class="n">r</span> <span class="o">=</span> <span class="bp">NotImplemented</span>

    <span class="n">a_ny</span> <span class="o">=</span> <span class="bp">NotImplemented</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)):</span>
        <span class="n">a_ny</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">NotImplemented</span>

    <span class="n">v</span> <span class="o">=</span> <span class="bp">NotImplemented</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">,</span> <span class="n">v</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">verlet_step</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">get_akselerasjon</span><span class="p">):</span>
    <span class="n">a_gammel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)):</span>
        <span class="n">a_gammel</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_akselerasjon</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
    
    <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">v</span> <span class="o">*</span> <span class="n">dt</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">a_gammel</span> <span class="o">*</span> <span class="n">dt</span><span class="o">**</span><span class="mi">2</span>

    <span class="n">a_ny</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)):</span>
        <span class="n">a_ny</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_akselerasjon</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
    
    <span class="n">v</span> <span class="o">=</span> <span class="n">v</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">a_gammel</span> <span class="o">+</span> <span class="n">a_ny</span><span class="p">)</span> <span class="o">*</span> <span class="n">dt</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">,</span> <span class="n">v</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="oppgave-4-sett-det-hele-sammen-til-a-lage-en-simulering">
<h3>Oppgave 4: Sett det hele sammen til å lage en simulering<a class="headerlink" href="#oppgave-4-sett-det-hele-sammen-til-a-lage-en-simulering" title="Permalink to this heading">#</a></h3>
<p>Her skal du skrive en <code class="docutils literal notranslate"><span class="pre">main</span></code>-funksjon der du setter det hele sammen. Det er viktig at <code class="docutils literal notranslate"><span class="pre">main</span></code>-funksjonen defineres på bunnen så alle de andre funksjonene er tilgjengelig.</p>
<p><em>Du kan ta utgangspunkt i kodeskallet under. Du må fylle inn der det står <code class="docutils literal notranslate"><span class="pre">NotImplemented</span></code></em>.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Hjelpefunksjon for å lage animasjon i 2d<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Får å se hvordan man bruker animasjonsfunksjonen, se i <strong>kodeskallet</strong> under.
Bare kopier denne koden på toppen av koden din og kjør <code class="docutils literal notranslate"><span class="pre">main</span></code>-funksjonen når du har skrevet ferdig den.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.animation</span> <span class="kn">import</span> <span class="n">FuncAnimation</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">to_rgba_array</span>

<span class="k">def</span> <span class="nf">create_animation_2d</span><span class="p">(</span><span class="n">positions</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">tail_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
    <span class="n">T</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">positions</span><span class="o">.</span><span class="n">shape</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    
    <span class="n">xlim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]))</span>
    <span class="n">ylim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-</span><span class="n">xlim</span><span class="p">,</span> <span class="n">xlim</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="n">ylim</span><span class="p">,</span> <span class="n">ylim</span><span class="p">])</span>

    <span class="c1"># Colors</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">to_rgba_array</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">gist_rainbow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="p">)))</span>  <span class="c1"># Use gist_rainbow colormap for neon colors</span>

    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">dots</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>  <span class="c1"># Use corresponding colors for dots and larger markersize</span>

    <span class="c1"># Initialize tail data</span>
    <span class="n">tail_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">line</span><span class="p">,</span> <span class="n">dot</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">dots</span><span class="p">):</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="n">lines</span> <span class="o">+</span> <span class="n">dots</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">frame</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">dot</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">dots</span><span class="p">)):</span>
            <span class="n">tail_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">tail_data</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">positions</span><span class="p">[</span><span class="n">frame</span><span class="p">,</span> <span class="n">i</span><span class="p">]))</span>

            <span class="c1"># Update line data with tail</span>
            <span class="n">current_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tail_data</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">line_data</span> <span class="o">=</span> <span class="n">tail_data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">-</span><span class="n">tail_length</span><span class="p">:]</span> <span class="k">if</span> <span class="n">current_length</span> <span class="o">&gt;</span> <span class="n">tail_length</span> <span class="k">else</span> <span class="n">tail_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

            <span class="c1"># Set line data</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">line_data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">line_data</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

            <span class="c1"># Update dot data with current position</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">frame</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1"># Set color to match object</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Make sure dots appear on top</span>

            <span class="c1"># Reset tail data when frame is 0</span>
            <span class="k">if</span> <span class="n">frame</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tail_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">lines</span> <span class="o">+</span> <span class="n">dots</span>

    <span class="c1"># Add legend</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">dots</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">get_texts</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>  <span class="c1"># Set legend text color to white</span>

    <span class="n">animation</span> <span class="o">=</span> <span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="n">T</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># plt.show()</span>

    <span class="k">return</span> <span class="n">animation</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Hjelpefunksjon for å lage animasjon i 3d<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Får å se hvordan man bruker animasjonsfunksjonen, se i <strong>kodeskallet</strong> under.
Bare kopier denne koden på toppen av koden din og kjør <code class="docutils literal notranslate"><span class="pre">main</span></code>-funksjonen når du har skrevet ferdig den.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.animation</span> <span class="kn">import</span> <span class="n">FuncAnimation</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">to_rgba_array</span>

<span class="k">def</span> <span class="nf">create_animation_3d</span><span class="p">(</span><span class="n">positions</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">tail_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
    <span class="n">T</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">positions</span><span class="o">.</span><span class="n">shape</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>

    <span class="n">xlim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]))</span>
    <span class="n">ylim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]))</span>
    <span class="n">zlim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-</span><span class="n">xlim</span><span class="p">,</span> <span class="n">xlim</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="n">ylim</span><span class="p">,</span> <span class="n">ylim</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_zlim</span><span class="p">([</span><span class="o">-</span><span class="n">zlim</span><span class="p">,</span> <span class="n">zlim</span><span class="p">])</span>

    <span class="c1"># Colors</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">to_rgba_array</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">gist_rainbow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="p">)))</span>  <span class="c1"># Use gist_rainbow colormap for neon colors</span>

    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">dots</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>  <span class="c1"># Use corresponding colors for dots</span>

    <span class="c1"># Initialize tail data</span>
    <span class="n">tail_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">line</span><span class="p">,</span> <span class="n">dot</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">dots</span><span class="p">):</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_3d_properties</span><span class="p">([])</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_3d_properties</span><span class="p">([])</span>
        <span class="k">return</span> <span class="n">lines</span> <span class="o">+</span> <span class="n">dots</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">frame</span><span class="p">):</span>
        <span class="c1"># Rotate the perspective</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">view_init</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">frame</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">dot</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">dots</span><span class="p">)):</span>
            <span class="n">tail_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">tail_data</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">positions</span><span class="p">[</span><span class="n">frame</span><span class="p">,</span> <span class="n">i</span><span class="p">]))</span>

            <span class="c1"># Update line data with tail</span>
            <span class="n">line_data</span> <span class="o">=</span> <span class="n">tail_data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">-</span><span class="n">tail_length</span><span class="p">:]</span> <span class="c1"># Now using constant tail length</span>

            <span class="c1"># Set line data</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">line_data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">line_data</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_3d_properties</span><span class="p">(</span><span class="n">line_data</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

            <span class="c1"># Update dot data with current position</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">frame</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_3d_properties</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1"># Set color to match object</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Bring dots to front</span>

        <span class="k">return</span> <span class="n">lines</span> <span class="o">+</span> <span class="n">dots</span>

    <span class="c1"># Add legend</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">dots</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">get_texts</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>  <span class="c1"># Set legend text color to white</span>

    <span class="n">animation</span> <span class="o">=</span> <span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="n">T</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">repeat_delay</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

    <span class="c1"># plt.show()</span>

    <span class="k">return</span> <span class="n">animation</span>
</pre></div>
</div>
</div>
</details><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">trange</span> <span class="c1"># gir progresjonsbar. Erstatter `range` i `for`-løkker</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">n_tidssteg</span> <span class="o">=</span> <span class="mi">1_000_000</span> <span class="c1"># 1 million tidssteg</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="c1"># 0.00001 år per tidssteg</span>

    <span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">navn</span> <span class="o">=</span> <span class="bp">NotImplemented</span> <span class="c1"># hent initialverdier</span>
    

    <span class="n">posisjoner</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">n_tidssteg</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
    <span class="n">hastigheter</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">n_tidssteg</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>

    <span class="n">posisjoner</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[:]</span>
    <span class="n">hastigheter</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">trange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_tidssteg</span><span class="p">):</span>
        
        <span class="c1"># Regn ut neste posisjoner og hastigheter med velocity Verlet</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="bp">NotImplemented</span>

        <span class="c1"># Lagre posisjonene og hastighetene</span>
        <span class="n">posisjoner</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="bp">NotImplemented</span>
        <span class="n">hastigheter</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="bp">NotImplemented</span>


    <span class="c1"># Lager 2d-animasjon og lagrer den som gif</span>
    <span class="n">ani_2d</span> <span class="o">=</span> <span class="n">create_animation_2d</span><span class="p">(</span><span class="n">posisjoner</span><span class="p">,</span> <span class="n">navn</span><span class="p">)</span>
    <span class="n">ani_2d</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;trelegemeproblem_2d.gif&quot;</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

    <span class="c1"># Lager 3d-animasjon og lagrer den som gif</span>
    <span class="n">ani_3d</span> <span class="o">=</span> <span class="n">create_animation_3d</span><span class="p">(</span><span class="n">posisjoner</span><span class="p">,</span> <span class="n">navn</span><span class="p">)</span>
    <span class="n">ani_3d</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;trelegemeproblem_3d.gif&quot;</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Løsningsforslag<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">n_tidssteg</span> <span class="o">=</span> <span class="mi">1_000_000</span> <span class="c1"># 1 million tidssteg</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="c1"># 0.00001 år per tidssteg</span>

    <span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">navn</span> <span class="o">=</span> <span class="n">get_init_data</span><span class="p">()</span> <span class="c1"># hent initialverdier</span>
    

    <span class="n">posisjoner</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">n_tidssteg</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
    <span class="n">hastigheter</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">n_tidssteg</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>

    <span class="n">posisjoner</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[:]</span>
    <span class="n">hastigheter</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">trange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_tidssteg</span><span class="p">):</span>
        
        <span class="c1"># Regn ut neste posisjoner og hastigheter med velocity Verlet</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">verlet_step</span><span class="p">(</span>
            <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span>
            <span class="n">v</span><span class="o">=</span><span class="n">v</span><span class="p">,</span>
            <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">,</span>
            <span class="n">dt</span><span class="o">=</span><span class="n">dt</span><span class="p">,</span>
            <span class="n">get_akselerasjon</span><span class="o">=</span><span class="n">get_akselerasjon</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Lagre posisjonene og hastighetene</span>
        <span class="n">posisjoner</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">[:]</span>
        <span class="n">hastigheter</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:]</span>


    <span class="c1"># Lager 2d-animasjon og lagrer den som gif</span>
    <span class="n">ani_2d</span> <span class="o">=</span> <span class="n">create_animation_2d</span><span class="p">(</span><span class="n">posisjoner</span><span class="p">,</span> <span class="n">navn</span><span class="p">)</span>
    <span class="n">ani_2d</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;trelegemeproblem_2d.gif&quot;</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

    <span class="c1"># Lager 3d-animasjon og lagrer den som gif</span>
    <span class="n">ani_3d</span> <span class="o">=</span> <span class="n">create_animation_3d</span><span class="p">(</span><span class="n">posisjoner</span><span class="p">,</span> <span class="n">navn</span><span class="p">)</span>
    <span class="n">ani_3d</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;trelegemeproblem_3d.gif&quot;</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "reneaas/vgs_programmering",
            ref: "main/",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./book/fysikk/celestial_mechanics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="solsystem_med_interaksjon.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Simulering av Solsystemet med Interaksjoner</p>
      </div>
    </a>
    <a class="right-next"
       href="../bullet_trajectory/bullet_trajectory.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Et pistolskudd opp i lufta</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bakgrunnsteori">Bakgrunnsteori</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gravitasjonskraften-fra-ett-legeme-pa-et-annet">Gravitasjonskraften fra ett legeme på et annet</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gravitasjonskraften-pa-ett-legeme-fra-n-1-andre-legemer">Gravitasjonskraften på ett legeme fra <span class="math notranslate nohighlight">\(n - 1\)</span> andre legemer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#newtons-2-lov">Newtons 2.lov</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velocity-verlet-algoritmen">Velocity Verlet-algoritmen</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#astronomiske-enheter">Astronomiske enheter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#initialbetingelser">Initialbetingelser</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgaver">Oppgaver</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-1-lag-arrays-med-initialbetingelser">Oppgave 1: lag arrays med initialbetingelser</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-2-lag-en-funksjon-som-regner-ut-akselerasjonen">Oppgave 2: Lag en funksjon som regner ut akselerasjonen</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-3-lag-en-funksjon-som-regner-ut-neste-posisjon-og-hastighet">Oppgave 3: Lag en funksjon som regner ut neste posisjon og hastighet</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-4-sett-det-hele-sammen-til-a-lage-en-simulering">Oppgave 4: Sett det hele sammen til å lage en simulering</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By René Ask
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>